<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU Scheduling Simulator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="colors.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üîÑ Context Switching Simulator</h1>
            <p class="subtitle">Visualize CPU scheduling algorithms with process execution</p>
        </header>

        <div class="main-content">
            <!-- Left Panel: Controls -->
            <div class="left-panel">
                <div class="config-section">
                    <h2>‚öôÔ∏è Configuration</h2>
                    
                    <div class="form-group">
                        <label for="numProcesses">Number of Processes:</label>
                        <input type="range" id="numProcesses" min="3" max="15" value="6">
                        <span id="processCount">6</span>
                    </div>

                    <div class="form-group">
                        <label for="timeQuantum">Time Quantum (for RR):</label>
                        <input type="range" id="timeQuantum" min="1" max="10" value="4" step="0.5">
                        <span id="quantumValue">4.0</span>
                    </div>

                    <div class="form-group">
                        <label for="contextSwitchTime">Context Switch Time:</label>
                        <input type="range" id="contextSwitchTime" min="0" max="2" value="1" step="0.1">
                        <span id="switchValue">1.0</span>
                    </div>
                </div>

                <div class="algorithm-section">
                    <h2>üìä Select Algorithm</h2>
                    <div class="algorithm-buttons">
                        <button class="algo-btn active" data-algo="FCFS">
                            <span class="algo-name">FCFS</span>
                            <span class="algo-desc">First-Come First-Served</span>
                        </button>
                        
                        <button class="algo-btn" data-algo="SJF">
                            <span class="algo-name">SJF</span>
                            <span class="algo-desc">Shortest Job First</span>
                        </button>
                        
                        <button class="algo-btn" data-algo="RR">
                            <span class="algo-name">Round Robin</span>
                            <span class="algo-desc">Time Quantum Based</span>
                        </button>
                    </div>

                    <button id="generateBtn" class="action-btn secondary">
                        üîÑ Generate New Processes
                    </button>
                    
                    <button id="runSimulation" class="action-btn primary">
                        ‚ñ∂Ô∏è Run Simulation
                    </button>
                </div>

                <div class="process-list-section">
                    <h2>üìã Generated Processes</h2>
                    <div class="process-list" id="processList"></div>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="right-panel">
                <div class="results-header">
                    <h2>üìà Simulation Results</h2>
                    <div class="algorithm-info">
                        <span id="currentAlgorithm">FCFS</span>
                        <div class="time-display">
                            Total Time: <span id="totalTime">0</span> units
                        </div>
                    </div>
                </div>

                <div class="gantt-section">
                    <h3>üìä Gantt Chart Visualization</h3>
                    <div class="gantt-container" id="ganttChart"></div>
                    <div class="gantt-timeline" id="ganttTimeline"></div>
                </div>

                <div class="metrics-section">
                    <h3>üìä Performance Metrics</h3>
                    <div class="metrics-grid" id="metricsGrid"></div>
                </div>

                <div class="results-section">
                    <h3>üìã Detailed Results</h3>
                    <div class="table-container">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Process</th>
                                    <th>Arrival</th>
                                    <th>Burst</th>
                                    <th>Start</th>
                                    <th>End</th>
                                    <th>Turnaround</th>
                                    <th>Waiting</th>
                                    <th>Response</th>
                                </tr>
                            </thead>
                            <tbody id="resultsBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="legend-section">
                    <h3>üé® Color Legend</h3>
                    <div class="color-legend" id="colorLegend"></div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>Context Switching Simulator ‚Ä¢ Demonstrates CPU Scheduling Algorithms</p>
        </footer>
    </div>

    <!-- JavaScript Files -->
    <script src="Process.js"></script>
    <script src="Algorithm.js"></script>
    <script src="FCFS.js"></script>
    <script src="SJF.js"></script>
    <script src="RoundRobin.js"></script>
    <script src="GanttChart.js"></script>
    <script src="ProcessGenerator.js"></script>
    <script src="ResultsDisplay.js"></script>
    <script src="main.js"></script>

    <script>
// Debug script
console.log('=== DEBUG INFO ===');
console.log('All JS files loaded:', {
    Process: typeof Process,
    Algorithm: typeof Algorithm,
    FCFS: typeof FCFS,
    SJF: typeof SJF,
    RoundRobin: typeof RoundRobin,
    GanttChart: typeof GanttChart,
    ProcessGenerator: typeof ProcessGenerator,
    ResultsDisplay: typeof ResultsDisplay,
    ContextSwitchingSimulator: typeof ContextSwitchingSimulator
});

// Check if elements exist
const checkElements = () => {
    const ids = [
        'metricsGrid', 
        'resultsBody', 
        'colorLegend', 
        'totalTime', 
        'currentAlgorithm'
    ];
    
    ids.forEach(id => {
        const el = document.getElementById(id);
        console.log(`${id}:`, el ? '‚úì Found' : '‚úó NOT FOUND');
    });
};

// Run check after page loads
setTimeout(checkElements, 1000);

// Make simulator globally accessible for debugging
window.debugSimulator = () => {
    if (window.simulator) {
        console.log('Simulator state:', {
            processes: window.simulator.processes,
            algorithm: window.simulator.algorithm,
            config: window.simulator.config
        });
    } else {
        console.log('Simulator not initialized');
    }
};
</script>
</body>

</html>
